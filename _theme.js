!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).__inside__||(self.__inside__={}))}(this,(function(e){"use strict";var n=function(){return(n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},t=/#(?:[0-9a-fA-F]{3}){1,2}/,r=/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,o='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif',i={accent_color:"#2a2b33",foreground_color:"#363636",border_color:"#e0e0e0",background:"#f3f6f7",sidebar_background:"#2a2b33",card_background:"#fff",content_width:"660px",font:{base:o,logo:o,menu:o,heading:o,label:o,code:o,print:o},highlight:["#ffffff","#e0e0e0","#f3f6f7","#95a5b3","#363636","#262b2f","#000000","#000000","#5d6c7b","#40464a","#2980b9","#be516e","#237dac","#944770","#239371","#edf0f3"]},c="undefined"!=typeof document;function a(e){if(!e)return"";var o=function(e,n){var t={},r=e.accent_color,o=e.foreground_color,i=e.border_color,c=e.background,a=e.sidebar_background,f=e.card_background,l=e.font,s=void 0===l?{}:l,h=e.content_width,b=e.highlight;t.accent_color=r?d(r).hex:n.accent_color,t.foreground_color=o?d(o).hex:n.foreground_color,t.border_color=i?d(i).hex:n.border_color,t.background=c?u(c):n.background,t.sidebar_background=a?u(a):n.sidebar_background,t.card_background=f?u(f):n.card_background;var _=s.base?g(s.base):n.font.base.split(",");t.font={base:String(_)},t.font.logo=s.logo?g(s.logo,_).join(","):n.font.logo,t.font.menu=s.menu?g(s.menu,_).join(","):n.font.menu,t.font.heading=s.heading?g(s.heading,_).join(","):n.font.heading,t.font.label=s.label?g(s.label,_).join(","):n.font.label,t.font.code=s.code?g(s.code).join(","):n.font.code,t.font.print=s.print?g(s.print).join(","):n.font.print;var p=function(e){if(!e)return;if("number"==typeof e)return{value:e,unit:"px"};var n=e.match(/^(\d+)(%|rem|px)$/);if(n)return{value:+n[1],unit:n[2]}}(h);t.content_width=p?p.value+p.unit:n.content_width,Array.isArray(b)?(t.highlight=b.map((function(e){return d(e).hex})).filter((function(e){return e})),t.highlight.length<16&&(t.highlight=n.highlight)):t.highlight=n.highlight;return t}(e,i),c=(o.card_background.match(t)||o.card_background.match(r)||[])[0]||o.foreground_color,a=d(o.accent_color);return"html{"+function(e,n){void 0===e&&(e={});void 0===n&&(n="var");return t(e);function t(e,r,o){void 0===r&&(r=[]);var i=function(i){var c=e[i];if(Array.isArray(c))c.forEach((function(e,n){var o,c=n.toString(16);return c.length<2&&(c="0"+c),t(((o={})[c]=e,o),r,i)}));else if("object"==typeof c)t(c,r,i);else{var a=(o?o+"_":"")+i;r.push(["--"+n+"-"+a.replace(/_/g,"-"),c,a])}};for(var c in e)i(c);return r}}(n(n({},o),{card_color:c,accent_color_005:"rgba("+a.r+","+a.g+","+a.b+",.05)",accent_color_01:"rgba("+a.r+","+a.g+","+a.b+",.1)",accent_color_02:"rgba("+a.r+","+a.g+","+a.b+",.2)",accent_color_04:"rgba("+a.r+","+a.g+","+a.b+",.4)",accent_color_08:"rgba("+a.r+","+a.g+","+a.b+",.8)",accent_color:a.hex}),"inside").map((function(e){return e.slice(0,2).join(":")})).join(";")+"}"}function u(e){var n=/(^data:image)|(^[^\(^'^"]*\.(jpg|png|gif|svg))/;return e.split(/\s+/).map((function(e){return e.match(n)?"url("+e+")":e})).join(" ")}function d(e,o){if(e=(e||"").trim(),t.test(e))return n({hex:e},l(e));if(r.test(e)){var i=e.match(r).slice(1,4).map((function(e){return+e})).filter((function(e){return e<256}));if(3===i.length)return{hex:f.apply(null,i),r:i[0],g:i[1],b:i[2]}}return o?n({hex:o},l(o)):{}}function f(e,n,t){return"#"+((1<<24)+(e<<16)+(n<<8)+t).toString(16).slice(1)}function l(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,n,t,r){return n+n+t+t+r+r}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function g(e,n){void 0===n&&(n=[]);var t=e?e.split(","):[],r=[];return t.forEach((function(e){(e=e.trim())&&!~n.indexOf(e)&&r.push(e)})),r.concat(n)}function s(e){if(!e)return{};var n=e.split(/\s+/);if(t.test(n[0]))return{color:n[0],image:n.slice(1).join(" ")};var r=n.length-1;return n[r]&&t.test(n[r])?{color:n.pop(),image:n.join(" ")}:{image:e}}c&&(document.addEventListener("inside:theme",(function(e){document.dispatchEvent(new CustomEvent("inside",{detail:{type:"theme",data:e.detail}}))})),document.addEventListener("inside",(function(e){if(!c||"theme"!==e.detail.type)return!1;var n=document.querySelector('style[is="theme"]'),t=document.querySelector('meta[name="theme-color"]'),r=window.__inside__||{};n||((n=document.createElement("style")).setAttribute("is","theme"),document.body.appendChild(n)),r.theme=Object.assign({},r.theme,e.detail.data),r.color=[s(r.theme.sidebar_background).color||r.theme.accent_color].concat(s(r.theme.background).color||[]),n.innerHTML=a(r.theme),t&&(t.content=r.color[r.color.length-1])}))),e.css=a,Object.defineProperty(e,"__esModule",{value:!0})}));
